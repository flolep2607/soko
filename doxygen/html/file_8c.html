<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sokoban: Référence du fichier src/file.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sokoban
   </div>
   <div id="projectbrief">Sokoban en C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Recherche','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('file_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Fonctions</a>  </div>
  <div class="headertitle">
<div class="title">Référence du fichier file.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="file_8h_source.html">file.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a63c9cc158ec03cd45228a04361bf4548"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a63c9cc158ec03cd45228a04361bf4548">FILE_H</a></td></tr>
<tr class="separator:a63c9cc158ec03cd45228a04361bf4548"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Fonctions</h2></td></tr>
<tr class="memitem:ab4af0fcf27b4202a006f2d6af643ff04"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#ab4af0fcf27b4202a006f2d6af643ff04">find_human</a> (<a class="el" href="structlevel__t.html">level_t</a> *level)</td></tr>
<tr class="memdesc:ab4af0fcf27b4202a006f2d6af643ff04"><td class="mdescLeft">&#160;</td><td class="mdescRight">permet d'initialiser et de trouver la position du joueur en parcourant la liste chainee (en reconstituant la position du joueur sur le tableau)  <a href="file_8c.html#ab4af0fcf27b4202a006f2d6af643ff04">Plus de détails...</a><br /></td></tr>
<tr class="separator:ab4af0fcf27b4202a006f2d6af643ff04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c09c64ea0e91431cc3e42f013c9ac0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#aa8c09c64ea0e91431cc3e42f013c9ac0">read_map</a> (FILE *flux_entree, unsigned int largeur_max, <a class="el" href="structliste__double.html">liste_double</a> *map)</td></tr>
<tr class="memdesc:aa8c09c64ea0e91431cc3e42f013c9ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction de creation / gestion des files.  <a href="file_8c.html#aa8c09c64ea0e91431cc3e42f013c9ac0">Plus de détails...</a><br /></td></tr>
<tr class="separator:aa8c09c64ea0e91431cc3e42f013c9ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe6a48abe8e6c5d3ced33992b0ab4b58"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#afe6a48abe8e6c5d3ced33992b0ab4b58">largeur</a> (FILE *flux_entree)</td></tr>
<tr class="memdesc:afe6a48abe8e6c5d3ced33992b0ab4b58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction parcourant tout le niveau afin de deteriner la largeur maximale du niveau.  <a href="file_8c.html#afe6a48abe8e6c5d3ced33992b0ab4b58">Plus de détails...</a><br /></td></tr>
<tr class="separator:afe6a48abe8e6c5d3ced33992b0ab4b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b4f19f39be42da4d7b082b0dd89f8fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a7b4f19f39be42da4d7b082b0dd89f8fb">remove_useless</a> (FILE *flux_entree)</td></tr>
<tr class="memdesc:a7b4f19f39be42da4d7b082b0dd89f8fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">enleve tous les commentaires sur le fichier source et se replace au debut  <a href="file_8c.html#a7b4f19f39be42da4d7b082b0dd89f8fb">Plus de détails...</a><br /></td></tr>
<tr class="separator:a7b4f19f39be42da4d7b082b0dd89f8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a952df8a5206422068d48c8d710ab1765"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level</a> (FILE *flux_entree, <a class="el" href="structlevel__t.html">level_t</a> *level)</td></tr>
<tr class="memdesc:a952df8a5206422068d48c8d710ab1765"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction permettant de lire un niveau dans le fichier source.  <a href="file_8c.html#a952df8a5206422068d48c8d710ab1765">Plus de détails...</a><br /></td></tr>
<tr class="separator:a952df8a5206422068d48c8d710ab1765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3c8dd65facc9cc21d0ceebfaede8cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structliste__double.html">liste_double</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a5a3c8dd65facc9cc21d0ceebfaede8cd">read_file</a> (const char *file_name)</td></tr>
<tr class="memdesc:a5a3c8dd65facc9cc21d0ceebfaede8cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction principale, permet de lire le fichier, et en utilisant les autres fonctions permet de retourner la liste chainee dans laquelle on a les differnets niveaux, au format desire.  <a href="file_8c.html#a5a3c8dd65facc9cc21d0ceebfaede8cd">Plus de détails...</a><br /></td></tr>
<tr class="separator:a5a3c8dd65facc9cc21d0ceebfaede8cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8d0efea98d0a41faf9e959749aa673a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#aa8d0efea98d0a41faf9e959749aa673a">save_game</a> (<a class="el" href="structliste__double.html">liste_double</a> *levels, const char *file_name)</td></tr>
<tr class="memdesc:aa8d0efea98d0a41faf9e959749aa673a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction permettant la sauvegarde de la partie dans son etat actuel Creer un fichier contenant les parametres qui pour chaque niveau se presente sous la forme : largeur(uint)|hauteur(uint)|[map(uchar,bool)]|[coup(uchar,bool)]|numerolvl(uint)|resolu(bool)  <a href="file_8c.html#aa8d0efea98d0a41faf9e959749aa673a">Plus de détails...</a><br /></td></tr>
<tr class="separator:aa8d0efea98d0a41faf9e959749aa673a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46205608c21ef57656406443b952c65"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#af46205608c21ef57656406443b952c65">read_save</a> (const char *file_name, <a class="el" href="structliste__double.html">liste_double</a> *levels)</td></tr>
<tr class="memdesc:af46205608c21ef57656406443b952c65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction lisant le fichier save.c pour reprendre la partie au point arrete. Pour chaque niveau, la fonction a besoin de connaitre la largeur, la hauteur, la liste chainee contenant la specification de la carte du niveau, ainsi que la liste des coups joues, le numero du niveau et un booleen pour savoir si il a etait resolu ou non.  <a href="file_8c.html#af46205608c21ef57656406443b952c65">Plus de détails...</a><br /></td></tr>
<tr class="separator:af46205608c21ef57656406443b952c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23247ef98737691bfc6f4324866b7046"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a23247ef98737691bfc6f4324866b7046">save_coups</a> (<a class="el" href="structliste__double.html">liste_double</a> *coups, int level_number)</td></tr>
<tr class="separator:a23247ef98737691bfc6f4324866b7046"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Documentation des macros</h2>
<a id="a63c9cc158ec03cd45228a04361bf4548"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63c9cc158ec03cd45228a04361bf4548">&#9670;&nbsp;</a></span>FILE_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILE_H</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Documentation des fonctions</h2>
<a id="ab4af0fcf27b4202a006f2d6af643ff04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4af0fcf27b4202a006f2d6af643ff04">&#9670;&nbsp;</a></span>find_human()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_human </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlevel__t.html">level_t</a> *&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>permet d'initialiser et de trouver la position du joueur en parcourant la liste chainee (en reconstituant la position du joueur sur le tableau) </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                               {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index=0;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <a class="code" href="structnode__t.html">liste_double_node_t</a> *current_node = level-&gt;map-&gt;first;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keywordflow">while</span>(current_node != NULL) {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        <span class="keywordflow">if</span>(((<a class="code" href="structCase.html">case_t</a>*)current_node-&gt;<a class="code" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">data</a>)-&gt;bloc==3){</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;            level-&gt;index=index;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        }</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        current_node = current_node-&gt;<a class="code" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">next</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        index++;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    }</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;[ERROR] No human\n&quot;</span>);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    exit(-1);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}</div>
<div class="ttc" id="astructCase_html"><div class="ttname"><a href="structCase.html">Case</a></div><div class="ttdoc">créer la structure Case qui spécifie le type de chaque case d'un niveau. Spécifie le type de bloc,...</div><div class="ttdef"><b>Definition:</b> structures.h:60</div></div>
<div class="ttc" id="astructnode__t_html"><div class="ttname"><a href="structnode__t.html">node_t</a></div><div class="ttdoc">créer la structure node_t qui permet de créer une liste chainée de avec n'importe quel type de donnée...</div><div class="ttdef"><b>Definition:</b> structures.h:18</div></div>
<div class="ttc" id="astructnode__t_html_aa69340d9d81a183ddfbfec74a7524966"><div class="ttname"><a href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">node_t::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> structures.h:19</div></div>
<div class="ttc" id="astructnode__t_html_aca548c9bafe54ba9db19d40a7a7f1cb3"><div class="ttname"><a href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">node_t::next</a></div><div class="ttdeci">struct node_t * next</div><div class="ttdef"><b>Definition:</b> structures.h:21</div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">node_t::data</a>, et <a class="el" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">node_t::next</a>.</p>

<p class="reference">Référencé par <a class="el" href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level()</a>.</p>

</div>
</div>
<a id="aa8c09c64ea0e91431cc3e42f013c9ac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c09c64ea0e91431cc3e42f013c9ac0">&#9670;&nbsp;</a></span>read_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_map </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>flux_entree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>largeur_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structliste__double.html">liste_double</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction de creation / gestion des files. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">flux_entree</td><td></td></tr>
    <tr><td class="paramname">largeur_max</td><td></td></tr>
    <tr><td class="paramname">map</td><td>map qui va etre remplie </td></tr>
  </table>
  </dd>
</dl>
<p>Lit la ligne tant que l'on ne rencontre pas un ';' qui indique la fin d'un plateau, gere les cas de retour a la ligne et de fin de fichier</p>
<p>Construct a new switch object permettant d'associer chaque caractere du fichier source a un couple d'int et de booleen, le premier permettant de determiner le type du bloc, le second permettant de savoir si l'on se trouve sur une cible ou non</p>
<p>Si on arrive a la fin du fichier, en ayant deja Remplissage de la liste chainee par des blocs vides pour completer les espaces vides pour que le 'tableau'soit rectangulaire</p>
<p>Remplissage de la liste chainee par des blocs vides pour completer les espaces vides pour que le 'tableau'soit rectangulaire</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordtype">char</span> character;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">while</span> (!feof(flux_entree) &amp;&amp; !ferror(flux_entree))</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    {<span class="comment"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">        Lit la ligne tant que l&#39;on ne rencontre pas un &#39;;&#39; qui indique la fin d&#39;un plateau, gere les cas de retour a la ligne</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">        et de fin de fichier</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">while</span> (!feof(flux_entree) &amp;&amp; !ferror(flux_entree) &amp;&amp; character != <span class="charliteral">&#39;;&#39;</span>)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            character = fgetc(flux_entree);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <span class="keywordflow">if</span> (i == 0 &amp;&amp; character == <span class="charliteral">&#39;;&#39;</span>)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                fseek(flux_entree, -1, SEEK_CUR);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                return ;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (character == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            }<span class="comment"></span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">             * @brief Construct a new switch object permettant d&#39;associer chaque caractere du fichier source a un couple d&#39;int et de booleen,</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">             le premier permettant de determiner le type du bloc, le second permettant de savoir si l&#39;on se trouve sur une cible ou non</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">switch</span> (character)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>:</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(1, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>:</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(0, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;$&#39;</span>:</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(2, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;@&#39;</span>:</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(3, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(0, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(2, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;\r&#39;</span>:</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                i--;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">case</span> EOF:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                <span class="keywordflow">if</span> (i != 0)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                {<span class="comment"></span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">                    /**</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">                     * @brief Si on arrive a la fin du fichier, en ayant deja Remplissage de la liste chainee par des blocs vides pour completer les espaces vides pour que</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">                     le &#39;tableau&#39;soit rectangulaire</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">                     *</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="keywordflow">while</span> (i &lt; largeur_max)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                        <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(0, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                        i++;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                fprintf(stderr,<span class="stringliteral">&quot;Fichier corrompu |%c|%d|\n&quot;</span>,character, character);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                exit(-1);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            i++;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }<span class="comment"></span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">        * @brief Remplissage de la liste chainee par des blocs vides pour completer les espaces vides pour que</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">        le &#39;tableau&#39;soit rectangulaire</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">        *</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">while</span> (i &lt; largeur_max)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(0, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            i++;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="ttc" id="apile_8c_html_a642c3814789a10f9a018ec9a90c60f93"><div class="ttname"><a href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a></div><div class="ttdeci">case_t * create_case(unsigned char bloc, bool cible)</div><div class="ttdoc">Creer une structure case_t en prenant le contenu de la structure en parametre.</div><div class="ttdef"><b>Definition:</b> pile.c:14</div></div>
<div class="ttc" id="apile_8c_html_a645685f6c0a357463bbfe0371f71096f"><div class="ttname"><a href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a></div><div class="ttdeci">void liste_double_ajout_en_queue(liste_double *liste, void *data)</div><div class="ttdoc">Empile un maillon a la fin d'une liste chainee en prenant en parametre la valeur contenu dans le mail...</div><div class="ttdef"><b>Definition:</b> pile.c:172</div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case()</a>, et <a class="el" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue()</a>.</p>

<p class="reference">Référencé par <a class="el" href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level()</a>.</p>

</div>
</div>
<a id="afe6a48abe8e6c5d3ced33992b0ab4b58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe6a48abe8e6c5d3ced33992b0ab4b58">&#9670;&nbsp;</a></span>largeur()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int largeur </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>flux_entree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction parcourant tout le niveau afin de deteriner la largeur maximale du niveau. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">flux_entree</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>unsigned int largeur_max </dd></dl>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> position_before_map = ftell(flux_entree);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> largeur_max = 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a = 0;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">char</span> caract = 0;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">while</span> (!feof(flux_entree) &amp;&amp; caract != <span class="charliteral">&#39;;&#39;</span>)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        caract = fgetc(flux_entree);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">while</span> (!feof(flux_entree) &amp;&amp; caract != <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            a++;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keywordflow">if</span> (a &gt; largeur_max)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                largeur_max = a;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            caract = fgetc(flux_entree);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span> (!feof(flux_entree))</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            caract = fgetc(flux_entree);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">if</span> (caract == <span class="charliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                caract = fgetc(flux_entree);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            a = 1;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    fseek(flux_entree, position_before_map, SEEK_SET);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> largeur_max;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Référencé par <a class="el" href="movement_8c.html#a75964ea0ca1ec900d9dc7a47b6c89c40">is_on_map2()</a>, <a class="el" href="movement_8c.html#a4cd9956b727eb8b47280e783795c9bf4">move_direction()</a>, <a class="el" href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level()</a>, et <a class="el" href="file_8c.html#af46205608c21ef57656406443b952c65">read_save()</a>.</p>

</div>
</div>
<a id="a7b4f19f39be42da4d7b082b0dd89f8fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b4f19f39be42da4d7b082b0dd89f8fb">&#9670;&nbsp;</a></span>remove_useless()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool remove_useless </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>flux_entree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>enleve tous les commentaires sur le fichier source et se replace au debut </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">flux_entree</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>booleen </dd></dl>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (fgetc(flux_entree) == <span class="charliteral">&#39;;&#39;</span>)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">while</span> (fgetc(flux_entree) != <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span> (fgetc(flux_entree) != <span class="charliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            fseek(flux_entree, -1, SEEK_CUR);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        fseek(flux_entree, -1, SEEK_CUR);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Référencé par <a class="el" href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level()</a>.</p>

</div>
</div>
<a id="a952df8a5206422068d48c8d710ab1765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a952df8a5206422068d48c8d710ab1765">&#9670;&nbsp;</a></span>read_one_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_one_level </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>flux_entree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlevel__t.html">level_t</a> *&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction permettant de lire un niveau dans le fichier source. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">flux_entree</td><td></td></tr>
    <tr><td class="paramname">level</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>int </dd></dl>
<p>enleve les commentaires et autre annotation inutile pour la lecture du niveau</p>
<p>Lis les informations du niveau en associant le numero du niveau, la largeur max, la map du niveau a l'objet de classe level</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">int</span> level_number = -1;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">while</span> (!feof(flux_entree) &amp;&amp; fscanf(flux_entree, <span class="stringliteral">&quot;;LEVEL %d&quot;</span>, &amp;level_number) == 0)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        fgetc(flux_entree);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">while</span> (!feof(flux_entree) &amp;&amp; fgetc(flux_entree) != <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (fgetc(flux_entree) != <span class="charliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        fseek(flux_entree, -1, SEEK_CUR);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">     * @brief enleve les commentaires et autre annotation inutile pour la lecture du niveau</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="file_8c.html#a7b4f19f39be42da4d7b082b0dd89f8fb">remove_useless</a>(flux_entree))</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">     * @brief Lis les informations du niveau en associant le numero du niveau, la largeur max, la map du niveau</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">      a l&#39;objet de classe level</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (level_number == -1)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    level-&gt;lvl_number = level_number;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">int</span> largeur_max = <a class="code" href="file_8c.html#afe6a48abe8e6c5d3ced33992b0ab4b58">largeur</a>(flux_entree);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    level-&gt;largeur = largeur_max;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="file_8c.html#aa8c09c64ea0e91431cc3e42f013c9ac0">read_map</a>(flux_entree, largeur_max,level-&gt;map);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (level-&gt;map-&gt;size &lt;= 0)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;[ERROR] map size null&quot;</span>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        exit(-1);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    level-&gt;hauteur = level-&gt;map-&gt;size / largeur_max;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="file_8c.html#ab4af0fcf27b4202a006f2d6af643ff04">find_human</a>(level);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="ttc" id="afile_8c_html_a7b4f19f39be42da4d7b082b0dd89f8fb"><div class="ttname"><a href="file_8c.html#a7b4f19f39be42da4d7b082b0dd89f8fb">remove_useless</a></div><div class="ttdeci">bool remove_useless(FILE *flux_entree)</div><div class="ttdoc">enleve tous les commentaires sur le fichier source et se replace au debut</div><div class="ttdef"><b>Definition:</b> file.c:164</div></div>
<div class="ttc" id="afile_8c_html_aa8c09c64ea0e91431cc3e42f013c9ac0"><div class="ttname"><a href="file_8c.html#aa8c09c64ea0e91431cc3e42f013c9ac0">read_map</a></div><div class="ttdeci">void read_map(FILE *flux_entree, unsigned int largeur_max, liste_double *map)</div><div class="ttdoc">Fonction de creation / gestion des files.</div><div class="ttdef"><b>Definition:</b> file.c:37</div></div>
<div class="ttc" id="afile_8c_html_ab4af0fcf27b4202a006f2d6af643ff04"><div class="ttname"><a href="file_8c.html#ab4af0fcf27b4202a006f2d6af643ff04">find_human</a></div><div class="ttdeci">void find_human(level_t *level)</div><div class="ttdoc">permet d'initialiser et de trouver la position du joueur en parcourant la liste chainee (en reconstit...</div><div class="ttdef"><b>Definition:</b> file.c:14</div></div>
<div class="ttc" id="afile_8c_html_afe6a48abe8e6c5d3ced33992b0ab4b58"><div class="ttname"><a href="file_8c.html#afe6a48abe8e6c5d3ced33992b0ab4b58">largeur</a></div><div class="ttdeci">unsigned int largeur(FILE *flux_entree)</div><div class="ttdoc">Fonction parcourant tout le niveau afin de deteriner la largeur maximale du niveau.</div><div class="ttdef"><b>Definition:</b> file.c:127</div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="file_8c.html#ab4af0fcf27b4202a006f2d6af643ff04">find_human()</a>, <a class="el" href="file_8c.html#afe6a48abe8e6c5d3ced33992b0ab4b58">largeur()</a>, <a class="el" href="file_8c.html#aa8c09c64ea0e91431cc3e42f013c9ac0">read_map()</a>, et <a class="el" href="file_8c.html#a7b4f19f39be42da4d7b082b0dd89f8fb">remove_useless()</a>.</p>

<p class="reference">Référencé par <a class="el" href="file_8c.html#a5a3c8dd65facc9cc21d0ceebfaede8cd">read_file()</a>.</p>

</div>
</div>
<a id="a5a3c8dd65facc9cc21d0ceebfaede8cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3c8dd65facc9cc21d0ceebfaede8cd">&#9670;&nbsp;</a></span>read_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structliste__double.html">liste_double</a>* read_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction principale, permet de lire le fichier, et en utilisant les autres fonctions permet de retourner la liste chainee dans laquelle on a les differnets niveaux, au format desire. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>levels, la liste chainee avec les niveaux remplis, au bon format </dd></dl>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    FILE *flux_entree;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">bool</span> end=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    flux_entree = fopen(file_name, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (flux_entree == NULL)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;Cannot open file\n&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        exit(-1);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="structliste__double.html">liste_double</a> *levels = <a class="code" href="pile_8c.html#ad560ee0e68889ad773a4b1a9acf78f84">liste_double_init</a>();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">while</span>(!end)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="structlevel__t.html">level_t</a> *level = <a class="code" href="pile_8c.html#a02afd016d79109bf8f797df30ed8df7a">level_init</a>();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level</a>(flux_entree, level) == 1)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(levels, level);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="pile_8c.html#aa22846b68df83fc80b5b7626682158ab">level_destroy</a>(level);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            end=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    fclose(flux_entree);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> levels;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="ttc" id="afile_8c_html_a952df8a5206422068d48c8d710ab1765"><div class="ttname"><a href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level</a></div><div class="ttdeci">int read_one_level(FILE *flux_entree, level_t *level)</div><div class="ttdoc">Fonction permettant de lire un niveau dans le fichier source.</div><div class="ttdef"><b>Definition:</b> file.c:190</div></div>
<div class="ttc" id="apile_8c_html_a02afd016d79109bf8f797df30ed8df7a"><div class="ttname"><a href="pile_8c.html#a02afd016d79109bf8f797df30ed8df7a">level_init</a></div><div class="ttdeci">level_t * level_init()</div><div class="ttdoc">Initialise une structure level_t. Met les valeurs des donnees de type entiers a 0 et celle de type bo...</div><div class="ttdef"><b>Definition:</b> pile.c:27</div></div>
<div class="ttc" id="apile_8c_html_aa22846b68df83fc80b5b7626682158ab"><div class="ttname"><a href="pile_8c.html#aa22846b68df83fc80b5b7626682158ab">level_destroy</a></div><div class="ttdeci">void level_destroy(level_t *level)</div><div class="ttdoc">Supprime une structure niveau en liberant les liste chainees contenu dans la structure (map et coups)...</div><div class="ttdef"><b>Definition:</b> pile.c:298</div></div>
<div class="ttc" id="apile_8c_html_ad560ee0e68889ad773a4b1a9acf78f84"><div class="ttname"><a href="pile_8c.html#ad560ee0e68889ad773a4b1a9acf78f84">liste_double_init</a></div><div class="ttdeci">liste_double * liste_double_init()</div><div class="ttdoc">intialise une liste chainee, met la valeur de ses donnees a 0 et intialise le pointeur de tete et de ...</div><div class="ttdef"><b>Definition:</b> pile.c:64</div></div>
<div class="ttc" id="astructlevel__t_html"><div class="ttname"><a href="structlevel__t.html">level_t</a></div><div class="ttdoc">Créer la structure Level qui permet de spécifier un niveau en entier. Spécifie la construction de la ...</div></div>
<div class="ttc" id="astructliste__double_html"><div class="ttname"><a href="structliste__double.html">liste_double</a></div><div class="ttdef"><b>Definition:</b> structures.h:28</div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="pile_8c.html#aa22846b68df83fc80b5b7626682158ab">level_destroy()</a>, <a class="el" href="pile_8c.html#a02afd016d79109bf8f797df30ed8df7a">level_init()</a>, <a class="el" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue()</a>, <a class="el" href="pile_8c.html#ad560ee0e68889ad773a4b1a9acf78f84">liste_double_init()</a>, et <a class="el" href="file_8c.html#a952df8a5206422068d48c8d710ab1765">read_one_level()</a>.</p>

<p class="reference">Référencé par <a class="el" href="game_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a id="aa8d0efea98d0a41faf9e959749aa673a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8d0efea98d0a41faf9e959749aa673a">&#9670;&nbsp;</a></span>save_game()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool save_game </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structliste__double.html">liste_double</a> *&#160;</td>
          <td class="paramname"><em>levels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction permettant la sauvegarde de la partie dans son etat actuel Creer un fichier contenant les parametres qui pour chaque niveau se presente sous la forme : largeur(uint)|hauteur(uint)|[map(uchar,bool)]|[coup(uchar,bool)]|numerolvl(uint)|resolu(bool) </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">levels</td><td></td></tr>
    <tr><td class="paramname">file_name</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>booleen accusant la sauvegarde ou non </dd></dl>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;{</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    FILE *flux_sortie;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    flux_sortie = fopen(file_name, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (flux_sortie == NULL)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;Cannot open save_file\n&quot;</span>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        exit(-1);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="structnode__t.html">liste_double_node_t</a> *current_node = levels-&gt;<a class="code" href="structliste__double.html#a08ecec17b9574bdd2801ec8c9d6abc5f">first</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">while</span> (current_node != NULL)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="structlevel__t.html">level_t</a> *level = (<a class="code" href="structlevel__t.html">level_t</a> *)current_node-&gt;<a class="code" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">data</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        fwrite(&amp;(level-&gt;largeur),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> int),1,flux_sortie);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        fwrite(&amp;(level-&gt;hauteur),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>),1,flux_sortie);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="structnode__t.html">liste_double_node_t</a> *current_node_temp = (level-&gt;map)-&gt;first;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">while</span> (current_node_temp != NULL)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <a class="code" href="structCase.html">case_t</a> *cell = (<a class="code" href="structCase.html">case_t</a> *)current_node_temp-&gt;<a class="code" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">data</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            fwrite(&amp;(cell-&gt;<a class="code" href="structCase.html#a81cbe670d6b905144687025151021512">bloc</a>),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> char),1,flux_sortie);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            fwrite(&amp;(cell-&gt;<a class="code" href="structCase.html#a6034ac2c0f76439b9b9966c4ea4da4f7">cible</a>),<span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>),1,flux_sortie);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            current_node_temp = current_node_temp-&gt;<a class="code" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">next</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        current_node_temp = (level-&gt;coups)-&gt;first;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        fwrite(&amp;(level-&gt;coups-&gt;size),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>),1,flux_sortie);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">while</span> (current_node_temp != NULL)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <a class="code" href="structCoups.html">coup_t</a> *coup = (<a class="code" href="structCoups.html">coup_t</a> *)current_node_temp-&gt;<a class="code" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">data</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            fwrite(&amp;(coup-&gt;<a class="code" href="structCoups.html#a739170969dd8bdc1fdaefa29be877a5c">direction</a>),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> char),1,flux_sortie);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            fwrite(&amp;(coup-&gt;<a class="code" href="structCoups.html#ac316b7ffdfbb8ec0f1c1ea17b31ecbae">pousse</a>),<span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>),1,flux_sortie);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            current_node_temp = current_node_temp-&gt;<a class="code" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">next</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        fwrite(&amp;(level-&gt;lvl_number),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>),1,flux_sortie);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        fwrite(&amp;(level-&gt;solved),<span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>),1,flux_sortie);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        current_node = current_node-&gt;<a class="code" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">next</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    fclose(flux_sortie);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div>
<div class="ttc" id="astructCase_html_a6034ac2c0f76439b9b9966c4ea4da4f7"><div class="ttname"><a href="structCase.html#a6034ac2c0f76439b9b9966c4ea4da4f7">Case::cible</a></div><div class="ttdeci">bool cible</div><div class="ttdef"><b>Definition:</b> structures.h:62</div></div>
<div class="ttc" id="astructCase_html_a81cbe670d6b905144687025151021512"><div class="ttname"><a href="structCase.html#a81cbe670d6b905144687025151021512">Case::bloc</a></div><div class="ttdeci">unsigned char bloc</div><div class="ttdef"><b>Definition:</b> structures.h:61</div></div>
<div class="ttc" id="astructCoups_html"><div class="ttname"><a href="structCoups.html">Coups</a></div><div class="ttdoc">créer la structure Coups qui spécifie le type des Coups effectués. Spécifie la direction du coup et s...</div><div class="ttdef"><b>Definition:</b> structures.h:71</div></div>
<div class="ttc" id="astructCoups_html_a739170969dd8bdc1fdaefa29be877a5c"><div class="ttname"><a href="structCoups.html#a739170969dd8bdc1fdaefa29be877a5c">Coups::direction</a></div><div class="ttdeci">unsigned char direction</div><div class="ttdef"><b>Definition:</b> structures.h:72</div></div>
<div class="ttc" id="astructCoups_html_ac316b7ffdfbb8ec0f1c1ea17b31ecbae"><div class="ttname"><a href="structCoups.html#ac316b7ffdfbb8ec0f1c1ea17b31ecbae">Coups::pousse</a></div><div class="ttdeci">bool pousse</div><div class="ttdef"><b>Definition:</b> structures.h:73</div></div>
<div class="ttc" id="astructliste__double_html_a08ecec17b9574bdd2801ec8c9d6abc5f"><div class="ttname"><a href="structliste__double.html#a08ecec17b9574bdd2801ec8c9d6abc5f">liste_double::first</a></div><div class="ttdeci">liste_double_node_t * first</div><div class="ttdef"><b>Definition:</b> structures.h:30</div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="structCase.html#a81cbe670d6b905144687025151021512">Case::bloc</a>, <a class="el" href="structCase.html#a6034ac2c0f76439b9b9966c4ea4da4f7">Case::cible</a>, <a class="el" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">node_t::data</a>, <a class="el" href="structCoups.html#a739170969dd8bdc1fdaefa29be877a5c">Coups::direction</a>, <a class="el" href="structliste__double.html#a08ecec17b9574bdd2801ec8c9d6abc5f">liste_double::first</a>, <a class="el" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">node_t::next</a>, et <a class="el" href="structCoups.html#ac316b7ffdfbb8ec0f1c1ea17b31ecbae">Coups::pousse</a>.</p>

<p class="reference">Référencé par <a class="el" href="game_8c.html#aa1d3734caf58813fe5bad1587d2fd000">event_handler()</a>.</p>

</div>
</div>
<a id="af46205608c21ef57656406443b952c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af46205608c21ef57656406443b952c65">&#9670;&nbsp;</a></span>read_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_save </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structliste__double.html">liste_double</a> *&#160;</td>
          <td class="paramname"><em>levels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction lisant le fichier save.c pour reprendre la partie au point arrete. Pour chaque niveau, la fonction a besoin de connaitre la largeur, la hauteur, la liste chainee contenant la specification de la carte du niveau, ainsi que la liste des coups joues, le numero du niveau et un booleen pour savoir si il a etait resolu ou non. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td></td></tr>
    <tr><td class="paramname">levels</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>booleen (false si erreur de lecture du fichier ou pas de fichier, true sinon) </dd></dl>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bloc=0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="file_8c.html#afe6a48abe8e6c5d3ced33992b0ab4b58">largeur</a>,hauteur;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">bool</span> cible=0;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size_coups=0;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    FILE *flux_entree;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="structlevel__t.html">level_t</a> * level;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    flux_entree = fopen(file_name, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="pile_8c.html#a46a1a2437fefa9f41911a6367e0cdc4d">liste_double_vider</a>(levels,<span class="keyword">true</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (flux_entree == NULL)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        printf(<span class="stringliteral">&quot;Cannot open save_file\n&quot;</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        exit(-1);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">while</span> (!feof(flux_entree))</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        level = <a class="code" href="pile_8c.html#a02afd016d79109bf8f797df30ed8df7a">level_init</a>();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span>(fread(&amp;(level-&gt;largeur), <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>), 1, flux_entree)!=1){</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            printf(<span class="stringliteral">&quot;finish read save\n&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <a class="code" href="pile_8c.html#aa22846b68df83fc80b5b7626682158ab">level_destroy</a>(level);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        fread(&amp;(level-&gt;hauteur),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>),1,flux_entree);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">// level-&gt;largeur=largeur;</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">// level-&gt;hauteur=hauteur;</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        i=0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">while</span> (i&lt;level-&gt;hauteur*level-&gt;largeur)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            fread(&amp;bloc,<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>),1,flux_entree);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            fread(&amp;cible,<span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>),1,flux_entree);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="comment">// printf(&quot;%d-%d\n&quot;,bloc,cible); GOOD</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(level-&gt;map, <a class="code" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case</a>(bloc,cible));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            i++;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        i=0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        fread(&amp;(size_coups),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>),1,flux_entree);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">while</span> (i&lt;size_coups)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            fread(&amp;bloc,<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>),1,flux_entree);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            fread(&amp;cible,<span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>),1,flux_entree);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(level-&gt;coups, <a class="code" href="pile_8c.html#aec9fe1dac5f230d10ea29cb2fca09690">create_coup</a>(bloc,cible));</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            i++;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        fread(&amp;(level-&gt;lvl_number),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>),1,flux_entree);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        fread(&amp;(level-&gt;solved),<span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>),1,flux_entree);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue</a>(levels, level);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div>
<div class="ttc" id="apile_8c_html_a46a1a2437fefa9f41911a6367e0cdc4d"><div class="ttname"><a href="pile_8c.html#a46a1a2437fefa9f41911a6367e0cdc4d">liste_double_vider</a></div><div class="ttdeci">void liste_double_vider(liste_double *liste, bool levels)</div><div class="ttdoc">Vide une liste chainee. Parcours la liste et libere chacun des maillons pour les supprimer.</div><div class="ttdef"><b>Definition:</b> pile.c:272</div></div>
<div class="ttc" id="apile_8c_html_aec9fe1dac5f230d10ea29cb2fca09690"><div class="ttname"><a href="pile_8c.html#aec9fe1dac5f230d10ea29cb2fca09690">create_coup</a></div><div class="ttdeci">coup_t * create_coup(unsigned char direction, bool pousse)</div><div class="ttdoc">Creer une structure coup_t en prenant le contenu de la structure en parametre.</div><div class="ttdef"><b>Definition:</b> pile.c:47</div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="pile_8c.html#a642c3814789a10f9a018ec9a90c60f93">create_case()</a>, <a class="el" href="pile_8c.html#aec9fe1dac5f230d10ea29cb2fca09690">create_coup()</a>, <a class="el" href="file_8c.html#afe6a48abe8e6c5d3ced33992b0ab4b58">largeur()</a>, <a class="el" href="pile_8c.html#aa22846b68df83fc80b5b7626682158ab">level_destroy()</a>, <a class="el" href="pile_8c.html#a02afd016d79109bf8f797df30ed8df7a">level_init()</a>, <a class="el" href="pile_8c.html#a645685f6c0a357463bbfe0371f71096f">liste_double_ajout_en_queue()</a>, et <a class="el" href="pile_8c.html#a46a1a2437fefa9f41911a6367e0cdc4d">liste_double_vider()</a>.</p>

<p class="reference">Référencé par <a class="el" href="game_8c.html#aa1d3734caf58813fe5bad1587d2fd000">event_handler()</a>.</p>

</div>
</div>
<a id="a23247ef98737691bfc6f4324866b7046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23247ef98737691bfc6f4324866b7046">&#9670;&nbsp;</a></span>save_coups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void save_coups </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structliste__double.html">liste_double</a> *&#160;</td>
          <td class="paramname"><em>coups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level_number</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                                     {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span>(coups-&gt;<a class="code" href="structliste__double.html#ae018afac9b249fff91bde9a072ff8a69">size</a>==0){</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    FILE *flux_sortie;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">char</span> file_name[40];</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    sprintf(file_name,<span class="stringliteral">&quot;data/soluce/%d.txt&quot;</span>,level_number);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    flux_sortie = fopen(file_name, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="structnode__t.html">liste_double_node_t</a> *current_node = coups-&gt;<a class="code" href="structliste__double.html#a08ecec17b9574bdd2801ec8c9d6abc5f">first</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    fprintf(flux_sortie,<span class="stringliteral">&quot;Coups:%d Poussées:%d\n&quot;</span>,coups-&gt;<a class="code" href="structliste__double.html#ae018afac9b249fff91bde9a072ff8a69">size</a>,<a class="code" href="pile_8c.html#a7753d0c628a7ed2e2e238fdaaab455f9">somme_poussees</a>(coups));</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    printf(<span class="stringliteral">&quot;Coups:%d Poussées:%d\n&quot;</span>,coups-&gt;<a class="code" href="structliste__double.html#ae018afac9b249fff91bde9a072ff8a69">size</a>,<a class="code" href="pile_8c.html#a7753d0c628a7ed2e2e238fdaaab455f9">somme_poussees</a>(coups));</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">while</span>(current_node != NULL) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">switch</span> (((<a class="code" href="structCoups.html">coup_t</a>*)current_node-&gt;<a class="code" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">data</a>)-&gt;direction)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="structures_8h.html#acd0f9b88c35112b35f67d3cde4b2365c">HAUT</a>:</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                fprintf(flux_sortie,<span class="stringliteral">&quot;HAUT\n&quot;</span>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="structures_8h.html#abd7bcdd3b14eec4414469f88f2bd8f12">BAS</a>:</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                fprintf(flux_sortie,<span class="stringliteral">&quot;BAS\n&quot;</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="structures_8h.html#af625d3f3bc022848a558f2b18def5b15">DROITE</a>:</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                fprintf(flux_sortie,<span class="stringliteral">&quot;DROITE\n&quot;</span>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="structures_8h.html#af07f8bf974fdf76afd17f2b97ac15a22">GAUCHE</a>:</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                fprintf(flux_sortie,<span class="stringliteral">&quot;GAUCHE\n&quot;</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        current_node = current_node-&gt;<a class="code" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">next</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    fclose(flux_sortie);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="ttc" id="apile_8c_html_a7753d0c628a7ed2e2e238fdaaab455f9"><div class="ttname"><a href="pile_8c.html#a7753d0c628a7ed2e2e238fdaaab455f9">somme_poussees</a></div><div class="ttdeci">int somme_poussees(liste_double *coups)</div><div class="ttdef"><b>Definition:</b> pile.c:327</div></div>
<div class="ttc" id="astructliste__double_html_ae018afac9b249fff91bde9a072ff8a69"><div class="ttname"><a href="structliste__double.html#ae018afac9b249fff91bde9a072ff8a69">liste_double::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> structures.h:29</div></div>
<div class="ttc" id="astructures_8h_html_abd7bcdd3b14eec4414469f88f2bd8f12"><div class="ttname"><a href="structures_8h.html#abd7bcdd3b14eec4414469f88f2bd8f12">BAS</a></div><div class="ttdeci">#define BAS</div><div class="ttdef"><b>Definition:</b> structures.h:9</div></div>
<div class="ttc" id="astructures_8h_html_acd0f9b88c35112b35f67d3cde4b2365c"><div class="ttname"><a href="structures_8h.html#acd0f9b88c35112b35f67d3cde4b2365c">HAUT</a></div><div class="ttdeci">#define HAUT</div><div class="ttdef"><b>Definition:</b> structures.h:8</div></div>
<div class="ttc" id="astructures_8h_html_af07f8bf974fdf76afd17f2b97ac15a22"><div class="ttname"><a href="structures_8h.html#af07f8bf974fdf76afd17f2b97ac15a22">GAUCHE</a></div><div class="ttdeci">#define GAUCHE</div><div class="ttdef"><b>Definition:</b> structures.h:11</div></div>
<div class="ttc" id="astructures_8h_html_af625d3f3bc022848a558f2b18def5b15"><div class="ttname"><a href="structures_8h.html#af625d3f3bc022848a558f2b18def5b15">DROITE</a></div><div class="ttdeci">#define DROITE</div><div class="ttdef"><b>Definition:</b> structures.h:10</div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="structures_8h.html#abd7bcdd3b14eec4414469f88f2bd8f12">BAS</a>, <a class="el" href="structnode__t.html#aa69340d9d81a183ddfbfec74a7524966">node_t::data</a>, <a class="el" href="structures_8h.html#af625d3f3bc022848a558f2b18def5b15">DROITE</a>, <a class="el" href="structliste__double.html#a08ecec17b9574bdd2801ec8c9d6abc5f">liste_double::first</a>, <a class="el" href="structures_8h.html#af07f8bf974fdf76afd17f2b97ac15a22">GAUCHE</a>, <a class="el" href="structures_8h.html#acd0f9b88c35112b35f67d3cde4b2365c">HAUT</a>, <a class="el" href="structnode__t.html#aca548c9bafe54ba9db19d40a7a7f1cb3">node_t::next</a>, <a class="el" href="structliste__double.html#ae018afac9b249fff91bde9a072ff8a69">liste_double::size</a>, et <a class="el" href="pile_8c.html#a7753d0c628a7ed2e2e238fdaaab455f9">somme_poussees()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="file_8c.html">file.c</a></li>
    <li class="footer">Généré le Vendredi 10 Juin 2022 08:34:22 pour Sokoban par <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
